<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Einstellungen-Statistiken</title>
        <p:growl showDetail="false"/>
    </h:head>

    <p:tabView id="tabs">
        <p:tab title="Kategorie">
            <p:calendar value="#{statisticsService.startDate}">
                <p:ajax event="dateSelect" update="category" listener="#{statisticsService.handleDateSelectStart}"/>
            </p:calendar>
            <p:calendar value="#{statisticsService.endDate}">
                <p:ajax event="dateSelect" update="category" listener="#{statisticsService.handleDateSelectEnd}"/>
            </p:calendar>
            <br/>
            <p:selectOneMenu value="#{statisticsService.selectedCategory}">
                <f:selectItems value="#{categoryService.names}"/>
                <p:ajax event="change" listener="#{statisticsService.handleCategoryChange(statisticsService.selectedCategory)}" update="category"/>
            </p:selectOneMenu>
            <p:barChart id="category" value="#{statisticsService.modelForCategory}" legendPosition="se" style="height:300px"
                        title="Verkaufte Produkte" orientation="horizontal" minX="0" animate="true" xaxisLabel="Anzahl"/>
        </p:tab>
        <p:tab title="Produkt">
            <p:calendar value="#{statisticsService.startDate}">
                <p:ajax event="dateSelect" update="product" listener="#{statisticsService.handleDateSelectStart}"/>
            </p:calendar>
            <p:calendar value="#{statisticsService.endDate}">
                <p:ajax event="dateSelect" update="product" listener="#{statisticsService.handleDateSelectEnd}"/>
            </p:calendar>
            <br/>
            <p:selectOneMenu value="#{statisticsService.selectedProduct}">
                <f:selectItems value="#{productBean.productNames}"/>
                <p:ajax event="change" listener="#{statisticsService.handleProductChange(statisticsService.selectedProduct)}" update="product"/>
            </p:selectOneMenu>
            <p:lineChart id="product" value="#{statisticsService.modelForProduct}" legendPosition="se" style="height:300px"
                        title="Verkaufte Produkte" orientation="horizontal" minY="0" animate="true" xaxisLabel="Datum" yaxisLabel="Anzahl"/>
        </p:tab>
    </p:tabView>
</ui:composition>